<!DOCTYPE html>
<html lang="no">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Oscar Kvalo Johansen — Innlogging</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="./style.css" />
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3146019535106543"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-md bg-white border-bottom">
      <div class="container">
        <a class="navbar-brand" href="#" id="nav-home">Oscar Kvalo Johansen</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <div class="navbar-nav ms-auto">
            <a class="nav-link" href="#" id="nav-quizzes">Quiz</a>
            <a class="nav-link d-none" href="#" id="nav-admin">Admin</a>
            <div class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
              >
                <span id="nav-user-badge">Gjest</span>
              </a>
              <ul class="dropdown-menu dropdown-menu-end">
                <li id="logout-nav-btn" class="d-none">
                  <button class="dropdown-item">Logg ut</button>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <!-- Header -->
    <header class="py-3 bg-light border-bottom">
      <div class="container">
        <h1 class="h3 text-center m-0">Oscar Kvalø Johansen</h1>
      </div>
    </header>

    <main class="container my-4">
      <!-- Login Area -->
      <section id="auth-area" class="mb-4">
        <div class="card card-elev">
          <div class="card-body">
            <h1 class="h4 fw-semibold mb-3">Logg inn</h1>
            <p class="text-muted small mb-3">
              Skriv inn e-post og passord for å logge inn eller opprette ny
              bruker. Vi sender en bekreftelseslenke hvis kontoen ikke finnes.
            </p>
            <form id="login-form" novalidate>
              <div class="mb-3">
                <label for="login-email" class="form-label">E-post</label>
                <input
                  type="email"
                  class="form-control"
                  id="login-email"
                  autocomplete="email"
                  required
                />
              </div>
              <div class="mb-3">
                <label for="login-password" class="form-label">Passord</label>
                <input
                  type="password"
                  class="form-control"
                  id="login-password"
                  autocomplete="current-password"
                  required
                />
              </div>
              <button type="submit" class="btn btn-primary w-100">
                Logg inn eller opprett bruker
              </button>
            </form>
            <div id="login-status" class="mt-3 text-muted small"></div>
          </div>
        </div>
      </section>

      <!-- App Area (shown when logged in) -->
      <section id="app-area" class="d-none">
        <!-- Quiz List -->
        <section id="quiz-list-area" class="d-none">
          <div class="row mb-4">
            <div class="col-md-6">
              <h2 class="h4 fw-semibold">Quiz</h2>
            </div>
            <div class="col-md-6 text-end">
              <button id="create-quiz-btn" class="btn btn-primary d-none">
                Opprett quiz
              </button>
            </div>
          </div>
          <div id="quiz-list" class="row g-3">
            <!-- Quizzes loaded here -->
          </div>
        </section>

        <!-- Quiz Creation Form -->
        <section id="quiz-create-area" class="d-none">
          <div class="mb-3">
            <button id="back-to-quizzes-btn" class="btn btn-secondary">
              Tilbake
            </button>
          </div>
          <div class="card card-elev">
            <div class="card-body">
              <h2 class="h4 fw-semibold mb-3">Opprett ny quiz</h2>
              <form id="quiz-create-form" novalidate>
                <div class="mb-3">
                  <label for="quiz-title" class="form-label">Tittel</label>
                  <input
                    type="text"
                    class="form-control"
                    id="quiz-title"
                    required
                  />
                </div>
                <div class="mb-3">
                  <label for="quiz-description" class="form-label">
                    Beskrivelse
                  </label>
                  <textarea
                    class="form-control"
                    id="quiz-description"
                    rows="3"
                  ></textarea>
                </div>
                <div id="questions-container" class="mb-3"></div>
                <button
                  type="button"
                  id="add-question-btn"
                  class="btn btn-secondary mb-3"
                >
                  Legg til spørsmål
                </button>
                <div class="d-flex gap-2">
                  <button type="submit" class="btn btn-primary">
                    Publiser quiz
                  </button>
                  <button
                    type="button"
                    id="cancel-create-btn"
                    class="btn btn-secondary"
                  >
                    Avbryt
                  </button>
                </div>
              </form>
              <div id="quiz-create-status" class="mt-3 text-muted small"></div>
            </div>
          </div>
        </section>

        <!-- Quiz Taking Area -->
        <section id="quiz-take-area" class="d-none">
          <div class="mb-3">
            <button id="back-to-quizzes-btn2" class="btn btn-secondary">
              Tilbake
            </button>
          </div>
          <div class="card card-elev">
            <div class="card-body">
              <h2 id="quiz-take-title" class="h4 fw-semibold mb-2"></h2>
              <p id="quiz-take-description" class="text-muted small mb-3"></p>
              <form id="quiz-take-form" novalidate>
                <div id="quiz-questions-container"></div>
                <div class="d-flex gap-2">
                  <button type="submit" class="btn btn-primary">
                    Send svar
                  </button>
                  <button
                    type="button"
                    id="cancel-take-btn"
                    class="btn btn-secondary"
                  >
                    Avbryt
                  </button>
                </div>
              </form>
              <div id="quiz-take-status" class="mt-3 text-muted small"></div>
            </div>
          </div>
        </section>

        <!-- Admin Results -->
        <section id="admin-results-area" class="d-none">
          <h2 class="h4 fw-semibold mb-3">Svar fra brukere</h2>
          <div id="admin-results-container">
            <!-- Results table loaded here -->
          </div>
        </section>
      </section>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script type="module" src="./Javascript/app.js"></script>
  </body>
</html>
